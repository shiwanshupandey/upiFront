{"ast":null,"code":"var _jsxFileName = \"/home/shiwanshu/Desktop/formPayment/frontend/src/Components/Formpage2.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport QRCode from 'qrcode.react';\nimport \"./Form.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nasync function sendToGoogleSpreadsheet(formData, file) {\n  const data = new FormData();\n  data.append('formData', JSON.stringify(formData));\n  data.append('file', file);\n  const response = await fetch('http://localhost:3002/api/send-to-google-spreadsheet', {\n    method: 'POST',\n    body: data\n  });\n  if (!response.ok) {\n    throw new Error('Network response was not ok');\n  }\n\n  // Parse the response JSON to get the image URL\n  const responseData = await response.json();\n  const imageUrl = responseData.imageUrl;\n  return imageUrl;\n}\nfunction FormPage2() {\n  _s();\n  const location = useLocation();\n  const {\n    formData\n  } = location.state || {};\n  const [file, setFile] = useState(null);\n  const [submitted, setSubmitted] = useState(false);\n  const [amount, setAmount] = useState('');\n  const generateUPIQRCode = () => {\n    const {\n      name\n    } = formData;\n    const pa = '9860617102@axl';\n    const pn = name;\n    const am = amount;\n    const timestamp = new Date().getTime(); // Generate a unique timestamp\n    return `upi://pay?pa=${pa}&pn=${pn}&am=${am}&tr=${timestamp}`; // Include timestamp in the UPI link\n  };\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const handleAmountChange = e => {\n    setAmount(e.target.value);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      await sendToGoogleSpreadsheet(formData, file);\n      setSubmitted(true);\n      console.log('Data sent to Google Sheets');\n    } catch (error) {\n      console.error('Error sending data to Google Sheets:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: submitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"confirmation-message\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Form Submitted Successfully!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(QRCode, {\n        value: generateUPIQRCode()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Select Amount:\", /*#__PURE__*/_jsxDEV(\"select\", {\n            value: amount,\n            onChange: handleAmountChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"10\",\n              children: \"10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"20\",\n              children: \"20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"50\",\n              children: \"50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"100\",\n              children: \"100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(FormPage2, \"d7JYkZN/O+RRC1hsXGRTEHCG0nk=\", false, function () {\n  return [useLocation];\n});\n_c = FormPage2;\nexport default FormPage2;\nvar _c;\n$RefreshReg$(_c, \"FormPage2\");","map":{"version":3,"names":["React","useState","useLocation","QRCode","jsxDEV","_jsxDEV","Fragment","_Fragment","sendToGoogleSpreadsheet","formData","file","data","FormData","append","JSON","stringify","response","fetch","method","body","ok","Error","responseData","json","imageUrl","FormPage2","_s","location","state","setFile","submitted","setSubmitted","amount","setAmount","generateUPIQRCode","name","pa","pn","am","timestamp","Date","getTime","handleFileChange","e","target","files","handleAmountChange","value","handleSubmit","preventDefault","console","log","error","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","type","accept","_c","$RefreshReg$"],"sources":["/home/shiwanshu/Desktop/formPayment/frontend/src/Components/Formpage2.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport QRCode from 'qrcode.react';\nimport \"./Form.css\";\n\nasync function sendToGoogleSpreadsheet(formData, file) {\n  const data = new FormData();\n  data.append('formData', JSON.stringify(formData));\n  data.append('file', file);\n\n  const response = await fetch('http://localhost:3002/api/send-to-google-spreadsheet', {\n    method: 'POST',\n    body: data,\n  });\n\n  if (!response.ok) {\n    throw new Error('Network response was not ok');\n  }\n\n  // Parse the response JSON to get the image URL\n  const responseData = await response.json();\n  const imageUrl = responseData.imageUrl;\n  return imageUrl;\n}\n\nfunction FormPage2() {\n  const location = useLocation();\n  const { formData } = location.state || {};\n  const [file, setFile] = useState(null);\n  const [submitted, setSubmitted] = useState(false);\n  const [amount, setAmount] = useState('');\n\n  const generateUPIQRCode = () => {\n    const { name } = formData;\n    const pa = '9860617102@axl';\n    const pn = name;\n    const am = amount;\n    const timestamp = new Date().getTime(); // Generate a unique timestamp\n    return `upi://pay?pa=${pa}&pn=${pn}&am=${am}&tr=${timestamp}`; // Include timestamp in the UPI link\n  };\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleAmountChange = (e) => {\n    setAmount(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await sendToGoogleSpreadsheet(formData, file);\n      setSubmitted(true);\n      console.log('Data sent to Google Sheets');\n    } catch (error) {\n      console.error('Error sending data to Google Sheets:', error);\n    }\n  };\n\n  return (\n    <div>\n      {submitted ? (\n        <div className=\"confirmation-message\">\n          <h2>Form Submitted Successfully!</h2>\n        </div>\n      ) : (\n        <>\n          <QRCode value={generateUPIQRCode()} />\n\n          <form onSubmit={handleSubmit}>\n            <label>\n              Select Amount:\n              <select value={amount} onChange={handleAmountChange}>\n                <option value=\"\">Select</option>\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n              </select>\n            </label>\n            <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\n            <button type=\"submit\">Submit</button>\n          </form>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default FormPage2;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}