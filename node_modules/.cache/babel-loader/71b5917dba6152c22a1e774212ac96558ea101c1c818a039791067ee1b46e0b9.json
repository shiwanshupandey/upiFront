{"ast":null,"code":"import React,{useState}from'react';import{useLocation}from'react-router-dom';import QRCode from'qrcode.react';import\"./Form.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";async function sendToGoogleSpreadsheet(formData,file){const data=new FormData();data.append('formData',JSON.stringify(formData));data.append('file',file);const response=await fetch('https://upi-test-6vnmu73gg-shiwanshuanooppandeygmailcoms-projects.vercel.app/',{method:'POST',body:data});if(!response.ok){throw new Error('Network response was not ok');}// Parse the response JSON to get the image URL\nconst responseData=await response.json();const imageUrl=responseData.imageUrl;return imageUrl;}function FormPage2(){const location=useLocation();const{formData}=location.state||{};const[file,setFile]=useState(null);const[submitted,setSubmitted]=useState(false);const[amount,setAmount]=useState('');const generateUPIQRCode=()=>{const{name}=formData;const pa='9860617102@axl';const pn=name;const am=amount;const timestamp=new Date().getTime();// Generate a unique timestamp\nreturn\"upi://pay?pa=\".concat(pa,\"&pn=\").concat(pn,\"&am=\").concat(am,\"&tr=\").concat(timestamp);// Include timestamp in the UPI link\n};const handleFileChange=e=>{setFile(e.target.files[0]);};const handleAmountChange=e=>{setAmount(e.target.value);};const handleSubmit=async e=>{e.preventDefault();try{await sendToGoogleSpreadsheet(formData,file);setSubmitted(true);console.log('Data sent to Google Sheets');}catch(error){console.error('Error sending data to Google Sheets:',error);}};return/*#__PURE__*/_jsx(\"div\",{children:submitted?/*#__PURE__*/_jsx(\"div\",{className:\"confirmation-message\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Form Submitted Successfully!\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(QRCode,{value:generateUPIQRCode()}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Select Amount:\",/*#__PURE__*/_jsxs(\"select\",{value:amount,onChange:handleAmountChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20\",children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50\",children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"100\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})]})});}export default FormPage2;","map":{"version":3,"names":["React","useState","useLocation","QRCode","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","sendToGoogleSpreadsheet","formData","file","data","FormData","append","JSON","stringify","response","fetch","method","body","ok","Error","responseData","json","imageUrl","FormPage2","location","state","setFile","submitted","setSubmitted","amount","setAmount","generateUPIQRCode","name","pa","pn","am","timestamp","Date","getTime","concat","handleFileChange","e","target","files","handleAmountChange","value","handleSubmit","preventDefault","console","log","error","children","className","onSubmit","onChange","type","accept"],"sources":["/home/shiwanshu/Desktop/formPayment/frontend/src/Components/Formpage2.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport QRCode from 'qrcode.react';\nimport \"./Form.css\";\n\nasync function sendToGoogleSpreadsheet(formData, file) {\n  const data = new FormData();\n  data.append('formData', JSON.stringify(formData));\n  data.append('file', file);\n\n  const response = await fetch('https://upi-test-6vnmu73gg-shiwanshuanooppandeygmailcoms-projects.vercel.app/', {\n    method: 'POST',\n    body: data,\n  });\n\n  if (!response.ok) {\n    throw new Error('Network response was not ok');\n  }\n\n  // Parse the response JSON to get the image URL\n  const responseData = await response.json();\n  const imageUrl = responseData.imageUrl;\n  return imageUrl;\n}\n\nfunction FormPage2() {\n  const location = useLocation();\n  const { formData } = location.state || {};\n  const [file, setFile] = useState(null);\n  const [submitted, setSubmitted] = useState(false);\n  const [amount, setAmount] = useState('');\n\n  const generateUPIQRCode = () => {\n    const { name } = formData;\n    const pa = '9860617102@axl';\n    const pn = name;\n    const am = amount;\n    const timestamp = new Date().getTime(); // Generate a unique timestamp\n    return `upi://pay?pa=${pa}&pn=${pn}&am=${am}&tr=${timestamp}`; // Include timestamp in the UPI link\n  };\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleAmountChange = (e) => {\n    setAmount(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await sendToGoogleSpreadsheet(formData, file);\n      setSubmitted(true);\n      console.log('Data sent to Google Sheets');\n    } catch (error) {\n      console.error('Error sending data to Google Sheets:', error);\n    }\n  };\n\n  return (\n    <div>\n      {submitted ? (\n        <div className=\"confirmation-message\">\n          <h2>Form Submitted Successfully!</h2>\n        </div>\n      ) : (\n        <>\n          <QRCode value={generateUPIQRCode()} />\n\n          <form onSubmit={handleSubmit}>\n            <label>\n              Select Amount:\n              <select value={amount} onChange={handleAmountChange}>\n                <option value=\"\">Select</option>\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n              </select>\n            </label>\n            <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\n            <button type=\"submit\">Submit</button>\n          </form>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default FormPage2;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}